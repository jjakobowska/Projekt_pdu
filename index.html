<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map_02529457981b6cfffe87d946c69264a0 {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }
        .leaflet-container { font-size: 1rem; }
    </style>
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
</head>
<body>
    <div class="folium-map" id="map_02529457981b6cfffe87d946c69264a0"></div>
</body>

<script src="AnimatedMarker.js"></script>

<script>
    var map_02529457981b6cfffe87d946c69264a0 = L.map("map_02529457981b6cfffe87d946c69264a0", {
        center: [10.0, -30.0],
        zoom: 2,
        zoomControl: true,
        preferCanvas: false,
    });

    L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors",
    }).addTo(map_02529457981b6cfffe87d946c69264a0);

    // === Marker coordinates with city names and flight counts ===
    const markers = [
        { name: "Buenos Aires", coords: [-34.6037, -58.3816], flights: 72539 },
        { name: "Santiago (Chile)", coords: [-33.4489, -70.6693], flights: 52787 },
        { name: "Lizbona", coords: [38.7169, -9.1399], flights: 40243 },
        { name: "Miami", coords: [25.7617, -80.1918], flights: 29849 },
        { name: "Montevideo", coords: [-34.9011, -56.1645], flights: 21553 },
        { name: "Londyn", coords: [51.5074, -0.1278], flights: 21300 },
        { name: "Orlando", coords: [28.5383, -81.3792], flights: 20097 },
        { name: "Paryż", coords: [48.8566, 2.3522], flights: 19710 },
        { name: "Fort Lauderdale", coords: [26.1224, -80.1373], flights: 18133 },
        { name: "Madryt", coords: [40.4168, -3.7038], flights: 15047 },
        { name: "Nowy Jork", coords: [40.7128, -74.0060], flights: 14824 },
        { name: "Mediolan", coords: [45.4642, 9.1900], flights: 14236 },
        { name: "Frankfurt", coords: [50.1109, 8.6821], flights: 12058 },
        { name: "Bogotá", coords: [4.7110, -74.0721], flights: 11939 },
        { name: "Meksyk (CDMX)", coords: [19.4326, -99.1332], flights: 10231 },
        { name: "Rzym", coords: [41.9028, 12.4964], flights: 9215 },
        { name: "Lima", coords: [-12.0464, -77.0428], flights: 8668 },
    ];

    const brazilCoords = [-23.5505, -46.6333];

     const planeIcon = L.icon({
        iconUrl: 'https://cdn-icons-png.flaticon.com/512/684/684908.png',
        iconSize: [32, 32],
        iconAnchor: [16, 16]
    });
 


    function flyFromBrazilTo(destLatLng) {
        const pathLine = L.polyline([brazilCoords, destLatLng], { color: 'gray', dashArray: '5' }).addTo(map_02529457981b6cfffe87d946c69264a0);
        const animatedMarker = L.animatedMarker(pathLine.getLatLngs(), {
            icon: planeIcon,
            autoStart: true,
            distance: 3000,
            interval: 100,
            onEnd: function () {
                map.removeLayer(pathLine);
                map.removeLayer(animatedMarker);
            }
        });
        map_02529457981b6cfffe87d946c69264a0.addLayer(animatedMarker);
    }

    // Dodaj markery i eventy najechania myszą
    markers.forEach(city => {
        const marker = L.marker(city.coords).addTo(map_02529457981b6cfffe87d946c69264a0);
        marker.bindTooltip(`<div>${city.name}<br>Liczba lotów: ${city.flights}</div>`, { sticky: true });
        marker.on('mouseover', () => flyFromBrazilTo(city.coords));
    });
</script>
</html>
